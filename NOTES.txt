Current issue: understand and eliminate spurious edge gradients.

Q1: Are there spurious edge gradients for...
  - fully populated images 
  - with displacement
  - single pass
  - spline interpolation of outliers
  - no smoothing

A1:
  1) [invalidated by #3 & #5, edge effects are reduced for un-equalized
  synthetic images] initial tests show NO edge effects for the synth test, but
  YES edge effects in image test.
  
  2) the difference is not size - the above remains true when the images size
  for synth is set the same as image, the edges are recongizably different, but
  not worse. 

  3) applying the equalization routine to the synthetic images makes the two
    results similar (both display bias at the edge)

  4) cropping off 40 pixels from all sides (> width of the equalization
    window) did not have any effect. The effect is not some "edge effect"
    in the equalization routine.

  5) to be sure, I disabled equalization for the synthetic images, and found that
    the edge effect is still there, just smaller

Q2: Is the problem related to data boundaries (e.g. the roi) or to the matrix
edges? 

A2:
  1) The problem is tied to the data boundaries, not the matrix edges. When I
  include a flat boundary within the matrix, the edge effect appears at that
  boundary, widens (from 1 pixel to 2 pixels), and worsens (from <0.5 pix to
  <0.9 pix). 

Q3: Is there any obvious difference in the correlation planes for edge- and
interior samples?

A3: Yes...

  1) Sample windows that contain a significant amount of (random) background are
  much noisier, and have poorly shaped (not gaussian, or even simple shaped)
  peaks.

  2) There is a significant bias in the x-direction at the lower boundary.

Q4: Does a "true" masked normalized cross correlation elimiate the bias?

A4:

  1) YES, for the synth test with no displacement and a horizontal boundary at y
  = 0.8. 

  2) YES, for the image test " "

  3) YES for both image and synth tests with horizontal boundary at y = 0.5, and
  with a sinusoidal boundary at witn mean = 0.7 and amplitude 0.2

Q5: It is necessary to cut off the correlation plane based on the number of
  overlapping pixels. Right now, I am using an arbitrary hard-coded value.  What
  is a reasonable choice for the overlap cutoff?

A5: The cutoff must be larger than the frac_data skip value, but less than a
  full window. I define two local parameters: a min_frac_data and a
  min_frac_overlap. For now, these are related by a simple multiple

Q6: Does the edge problem re-appear with non-zero (but constant) offsets?

A6: NO. The image test with uu = 10, vv = 10, and both yields similar(ly small)
errors to the zero offset case. The same is true for the synth case.

Q7: Does the edge problem re-appear with non-zero shear terms?

A7: 

  1) For image test with non-zero dudy, errors increase with increasing shear, but there is not
  concentrated high-error on the boundary. Switching back to the non-masked
  correlation yields noticable edge effect errors.
